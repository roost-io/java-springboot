# Test generated by RoostGPT for test dm-target-repo using AI Model gpt

config:
  target: "http://localhost:8080"
  phases:
    - duration: 60
      arrivalRate: 5

scenarios:
  - name: "Successful API request"
    flow:
      - get:
          url: "/api/products"
          headers:
            Content-Type: "application/json"
          expect:
            - statusCode: 200
            - hasProperty: "data"
            - equals:
                - json("$.data[0].id"): 1
                - json("$.data[1].id"): 2
                - json("$.data[2].id"): 3
                - json("$.data[3].id"): 4

  - name: "API request with validation failure"
    flow:
      - get:
          url: "/api/products"
          headers:
            Content-Type: "application/xml"
          expect:
            - statusCode: 400
            - hasProperty: "error"
            - equals:
                - json("$.error.message"): "Invalid Content-Type"

  - name: "API request with edge case"
    flow:
      - get:
          url: "/api/products?name=%3Cscript%3Ealert(%27XSS%27)%3C%2Fscript%3E"
          headers:
            Content-Type: "application/json"
          expect:
            - statusCode: 200
            - hasProperty: "data"
            - equals:
                - json("$.data[0].name"): "&lt;script&gt;alert(&#39;XSS&#39;)&lt;/script&gt;"