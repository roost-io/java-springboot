// Test generated by RoostGPT for test roost-test using AI Type Open AI and AI Model gpt-4

config:
  target: "{{ $processEnvironment.SERVER_URL }}"
  phases:
    - duration: 60
      arrivalRate: 20
  variables:
    productId: 1
    productData:
      name: "Updated Product"
      description: "This is an updated test product."
      price: 15.0
  processor: "./my-functions.js"

scenarios:
  - name: "Update an existing product"
    # This scenario tests the functionality of updating an existing product in the store.
    # The expected behavior is that the product with the provided ID should be updated with the new details.
    flow:
      - function: "generateProductData"
      - put:
          url: "/products/{{ productId }}"
          json:
            name: "{{ productData.name }}"
            description: "{{ productData.description }}"
            price: "{{ productData.price }}"
          headers:
            Content-Type: "application/json"
          capture:
            json: "$.product"
            as: "updatedProduct"
          expect:
            - statusCode: 200
            - hasProperty: "product"
            - equals:
                - "{{ updatedProduct.name }}"
                - "{{ productData.name }}"
            - equals:
                - "{{ updatedProduct.description }}"
                - "{{ productData.description }}"
            - equals:
                - "{{ updatedProduct.price }}"
                - "{{ productData.price }}"
