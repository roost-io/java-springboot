# ********RoostGPT********
# Test generated by RoostGPT for test dm-demo-api-test using AI Type Azure Open AI and AI Model roost-gpt4-32k

# Test generated for /products/{productId}_delete for http method type DELETE in artillery framework
# RoostTestHash=47d9fe845f



# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  environments:
    staging: 
  processor: "./artilleryProcessor.js"
  plugins:
    expect: {}
  payload:
    path: "products_productId_delete_others.csv"
    fields: 
      - "productId"
      - "invalidProductId"
  headers:
    Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"

scenarios:
  - name: "Non-successful API requests to /products/{productId}"
    flow:
      # Making a DELETE request with a non-existent product ID
      - delete: 
          url: "/products/{{ invalidProductId }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 404  # expecting a Not Found error
            - hasProperty: "error"
            - equals:
                - "{{ response.error }}"
                - "Product not found"
          think: 2
          
      # Making a DELETE request without authorization header
      - delete: 
          url: "/products/{{ productId }}"
          expect:
            - statusCode: 401  # expecting an Unauthorized error
            - hasProperty: "error"
            - equals:
                - "{{ response.error }}"
                - "Unauthorized"
          think: 2
          
      # Making a DELETE request with a valid product ID and a valid token
      - delete: 
          url: "/products/{{ productId }}"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 204  # expecting a successful deletion with no content
          think: 2
