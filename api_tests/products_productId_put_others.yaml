# Test generated by RoostGPT for test dm-artillery-test using AI Type Azure Open AI and AI Model roost-gpt4-32k

# RoostTestHash=7b2a6b6959

config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "products_productId_put_others.csv"
    fields: ["id", "name", "description", "price"]
    skipHeader: true
scenarios:
  - name: "Failure and edge case scenarios"
    flow:
      - think: 2
      - log: "Test: Post request with some payload fields missing"
        post:
          url: "/products/3"
          headers:
            Content-Type: "application/json"
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          json: 
            id: "{{ id }}"
            name: "{{ name }}"
          expect: 
            - statusCode: 400  # Expected status code for missing fields
            - hasProperty: 'message'  # The response body should contain a 'message' property
      - think: 2
      - log: "Test: Put request with incorrect Authorization token"
        put:
          url: "/products/1"
          headers:
            Content-Type: "application/json"
            Authorization: "Bearer InvalidToken"
          json: 
            id: "{{ id }}"
            name: "{{ name }}"
            description: "{{ description }}"
            price: "{{ price }}"
          expect: 
            - statusCode: 401  # Expected status code for authorization failure
            - hasProperty: 'message'  # The response body should contain a 'message' property
      - think: 2
      - log: "Test: Post request to a non-existent endpoint"
        post:
          url: "/nonexistent"
          headers:
            Content-Type: "application/json"
            Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
          json: 
            id: "{{ id }}"
            name: "{{ name }}"
            description: "{{ description }}"
            price: "{{ price }}"
          expect: 
            - statusCode: 404  # Expected status code for invalid URL
            - hasProperty: 'message'  # The response body should contain a 'message' property
