# Test generated by RoostGPT for test apitest-artillery using AI Type Open AI and AI Model gpt-4

# RoostTestHash=ed0d766b50

config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  phases:
    - duration: 60
      arrivalRate: 20
  payload:
    path: "products_get_others.csv"
    fields: ["id", "name", "description", "price"]
    skipHeader: true

scenarios:
  - name: "Testing failure, edge and error cases for /products API endpoint"
    flow:
      - log: "Test Case 1: Testing with missing authorization token"
        get:
          url: "/products"
          # Expecting 401 Unauthorized error as the authorization token is missing
          expect:
            - statusCode: 401
            - hasProperty: "message"
            - equals: 
                message: "Unauthorized"
      - think: 1

      - log: "Test Case 2: Testing with invalid authorization token"
        get:
          url: "/products"
          headers:
            Authorization: "Bearer InvalidToken"
          # Expecting 403 Forbidden error as the authorization token is invalid
          expect:
            - statusCode: 403
            - hasProperty: "message"
            - equals: 
                message: "Forbidden"
      - think: 1

      - log: "Test Case 3: Testing with invalid URL"
        get:
          url: "/invalid-url"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          # Expecting 404 Not Found error as the URL is invalid
          expect:
            - statusCode: 404
            - hasProperty: "message"
            - equals: 
                message: "Not Found"
      - think: 1

      - log: "Test Case 4: Testing with invalid query parameters"
        get:
          url: "/products?invalid_param=invalid_value"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          # Expecting 400 Bad Request error as the query parameter is invalid
          expect:
            - statusCode: 400
            - hasProperty: "message"
            - equals: 
                message: "Bad Request"
